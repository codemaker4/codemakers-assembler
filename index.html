<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Codemaker's Assembler</title>
  <link rel="stylesheet" href="index.css">
  <script src="messages.js"></script>
  <script src="instructions.js"></script>
  <script src="codePart.js"></script>
  <script src="compiler.js"></script>
  <script src="exporters.js"></script>
  <script src="emulator.js"></script>
</head>

  <body>
    <div class="controlPanel">
      <button onclick="window.open('https://docs.google.com/spreadsheets/d/1n4oHQyALy8eSwzNoQ8h_Uuwm7qNOYg7x-Y8puhcntzs/edit?usp=sharing', '_blank')">documentation</button>
      <button onclick="exportVincelingMem();">export to Vinceling's memory</button>
    <!-- <button onclick="exportNiknalEmulator();">export to Niknal's emulator</button> -->
    <button onclick="toggleEmulatorDrawer()">Toggle Emulator Drawer</button>
  </div>
  <div class="messagePanel" id="messagePanel">
  </div>
  <div class="codeContainer">
    <div class="inputContainer">
      <p id="lineNumbers"></p>
      <p id="input" contenteditable="true" spellcheck="false">
        ADR @readLocation - set the reading address<br>
        LDA - read<br>
        ADR @writeLocation - set the writing address<br>
        STA - write<br>
        HLT - stop<br>
        <br>
        readLocation:<br>
        12<br>
        <br>
        writeLocation:<br>
        0<br>
      </p>
    </div>
  </div>
  <div class="outputContainer">
    <p id="binOut">Press compile to compile the code, then press make QR code to make a QR code.</p>
  </div>
  <div class="emulator-drawer" id="emulator-drawer">
    <div>
      <table class="dataTable">
        <tr>
          <th>Reg</th>
          <th>Dec</th>
          <th>Bin</th>
        </tr>
        <tr>
          <td>A</td>
          <td id="register-A">0</td>
          <td id="register-A-bin">00000000</td>
        </tr>
        <tr>
          <td>B</td>
          <td id="register-B">0</td>
          <td id="register-B-bin">00000000</td>
        </tr>
        <tr>
          <td>Q</td>
          <td id="register-Q">0</td>
          <td id="register-Q-bin">00000000</td>
        </tr>
        <tr>
          <td>H</td>
          <td id="register-H">0</td>
          <td id="register-H-bin">00000000</td>
        </tr>
        <tr>
          <td>L</td>
          <td id="register-L">0</td>
          <td id="register-L-bin">00000000</td>
        </tr>
        <tr>
          <td>S</td>
          <td id="register-S">255</td>
          <td id="register-S-bin">11111111</td>
        </tr>
        <tr>
          <td>P</td>
          <td id="register-P">0</td>
          <td id="register-P-bin">0000000000000000</td>
        </tr>
        <tr>
          <td>C</td>
          <td id="register-C">0</td>
          <td id="register-C-bin">0</td>
      </table>
    </div>
    <div class="controls">
      <div id="clockIcon">ðŸ•›</div>
      <button onclick="runOneClock()">Run 1 Clock</button>-runs 1 clock<br>
      <button onclick="autoClock()">Auto Clock</button>-runs 1 clock every 10ms<br>
      <button onclick="restartEmulator()">Restart Emulator</button>-resets everything and injects code
    </div>
    <div class="debugConsole">
      <p id="debugConsole"></p>
    </div>
    <div class="devices" id="devices">
      <button onclick="createDevice()" id="createDeviceButton">Create Device</button>
      <select id="createDeviceType">
        <option value="memory">Memory</option>
      </select>
      <div class="deviceList">
        <!-- Dynamically generate device displays here -->
      </div>
    </div>
    <div class="deviceInfo" id="deviceInfo" style="display: none;">

    </div>
  </div>
</body>

</html>